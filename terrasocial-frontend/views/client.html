<!-- Espace Client TERRASOCIAL -->

<div class="client-dashboard">
    <!-- Dashboard Header -->
    <div class="dashboard-header">
        <h1>Espace Client</h1>
        <p class="subtitle">Gérez vos souscriptions et paiements</p>
    </div>

    <!-- Quick Stats -->
    <div class="grid-3">
        <div class="stat-box">
            <div class="stat-label">Souscriptions Actives</div>
            <div class="stat-value" id="activeSubsCount">0</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Total Investi</div>
            <div class="stat-value" id="totalInvestedAmount">0 XOF</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Paiements Complétés</div>
            <div class="stat-value" id="completedPaymentsCount">0</div>
        </div>
    </div>

    <!-- Tabs Navigation -->
    <div class="tabs-container">
        <button class="tab-button active" data-tab="subscriptions">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5-7h-3v-3H9v3H6v2h3v3h2v-3h3v-2z"/></svg>
            Mes Souscriptions
        </button>
        <button class="tab-button" data-tab="payments">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 8H4V6h16m0 10H4v-4h16m0-6H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/></svg>
            Mes Paiements
        </button>
        <button class="tab-button" data-tab="documents">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z"/></svg>
            Documents
        </button>
        <button class="tab-button" data-tab="support">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 12h-8v-2h8v2zm0-4h-8V9h8v2z"/></svg>
            Support
        </button>
    </div>

    <!-- Tab Contents -->

    <!-- Subscriptions Tab -->
    <div class="tab-content active" data-tab="subscriptions">
        <div class="tab-header">
            <h2>Mes Souscriptions</h2>
            <a href="#/offres" class="btn btn-primary">Voir les Offres</a>
        </div>

        <div data-load="subscriptions" class="subscriptions-list">
            <div class="card">
                <div class="spinner"></div>
                <p style="text-align: center;">Chargement de vos souscriptions...</p>
            </div>
        </div>

        <div id="noSubscriptions" style="display: none;">
            <div class="empty-state">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                <h3>Aucune Souscription</h3>
                <p>Vous n'avez pas encore de souscription. Explorez les offres disponibles!</p>
                <a href="#/offres" class="btn btn-primary">Découvrir les Offres</a>
            </div>
        </div>
    </div>

    <!-- Payments Tab -->
    <div class="tab-content" data-tab="payments">
        <div class="tab-header">
            <h2>Historique des Paiements</h2>
        </div>

        <div data-load="payments" class="payments-table">
            <div class="card">
                <div class="spinner"></div>
                <p style="text-align: center;">Chargement de vos paiements...</p>
            </div>
        </div>

        <div id="noPayments" style="display: none;">
            <div class="empty-state">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
                <h3>Aucun Paiement</h3>
                <p>Vous n'avez pas encore effectué de paiement.</p>
                <a href="#/client?tab=subscriptions" class="btn btn-secondary">Voir Souscriptions</a>
            </div>
        </div>
    </div>

    <!-- Documents Tab -->
    <div class="tab-content" data-tab="documents">
        <div class="tab-header">
            <h2>Documents</h2>
        </div>

        <div class="documents-grid">
            <div class="document-card">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                    <polyline points="13 2 13 9 20 9"></polyline>
                </svg>
                <div class="document-info">
                    <h3>Contrat de Souscription</h3>
                    <p class="text-small text-muted">PDF • 2.4 MB</p>
                </div>
                <button class="btn btn-small btn-secondary">Télécharger</button>
            </div>

            <div class="document-card">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                </svg>
                <div class="document-info">
                    <h3>Factures</h3>
                    <p class="text-small text-muted">PDF • 1.8 MB</p>
                </div>
                <button class="btn btn-small btn-secondary">Télécharger</button>
            </div>

            <div class="document-card">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                </svg>
                <div class="document-info">
                    <h3>Modifications</h3>
                    <p class="text-small text-muted">Historique des modifications</p>
                </div>
                <button class="btn btn-small btn-secondary">Consulter</button>
            </div>

            <div class="document-card">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m-5-9h10v2H7z"></path>
                </svg>
                <div class="document-info">
                    <h3>Récépissés</h3>
                    <p class="text-small text-muted">Vos reçus de paiement</p>
                </div>
                <button class="btn btn-small btn-secondary">Télécharger</button>
            </div>
        </div>
    </div>

    <!-- Support Tab -->
    <div class="tab-content" data-tab="support">
        <div class="tab-header">
            <h2>Besoin d'Aide?</h2>
        </div>

        <div class="support-container grid-2">
            <!-- Contact Card -->
            <div class="card">
                <h3>Nous Contacter</h3>
                <div class="contact-methods">
                    <div class="contact-method">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/></svg>
                        <div>
                            <strong>Chat en Direct</strong>
                            <p class="text-small">Disponible 9h-18h</p>
                        </div>
                    </div>

                    <div class="contact-method">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/></svg>
                        <div>
                            <strong>Téléphone</strong>
                            <p class="text-small">+221 77 XXX XXXX</p>
                        </div>
                    </div>

                    <div class="contact-method">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
                        <div>
                            <strong>Email</strong>
                            <p class="text-small">support@terrasocial.com</p>
                        </div>
                    </div>
                </div>
                <button class="btn btn-primary btn-block mt-2">Ouvrir un Ticket</button>
            </div>

            <!-- FAQ Card -->
            <div class="card">
                <h3>Ressources Utiles</h3>
                <ul class="resource-list">
                    <li><a href="#/faq" class="text-link">FAQ</a></li>
                    <li><a href="#" class="text-link">Guide d'Utilisation</a></li>
                    <li><a href="#" class="text-link">Tutoriels Vidéo</a></li>
                    <li><a href="#/legal/cgv" class="text-link">Conditions Générales</a></li>
                    <li><a href="#/legal/privacy" class="text-link">Politique de Confidentialité</a></li>
                </ul>
            </div>
        </div>

        <!-- Contact Form -->
        <div class="card mt-3">
            <h3>Envoyer un Message</h3>
            <form onsubmit="
                event.preventDefault();
                const subject = event.target.querySelector('[name=subject]').value;
                const message = event.target.querySelector('[name=message]').value;
                showToast('Votre message a été envoyé. Nous vous répondrons rapidement.', 'success');
                event.target.reset();
            ">
                <div class="form-group">
                    <label>Sujet</label>
                    <select name="subject" required>
                        <option value="">Sélectionner un sujet</option>
                        <option value="souscription">Question sur ma souscription</option>
                        <option value="paiement">Problème de paiement</option>
                        <option value="document">Demande de document</option>
                        <option value="autre">Autre</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Message</label>
                    <textarea name="message" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Envoyer</button>
            </form>
        </div>
    </div>
</div>

<style>
    .client-dashboard {
        padding: 2rem 0;
    }

    .dashboard-header {
        margin-bottom: 2rem;
    }

    .dashboard-header h1 {
        font-size: 2rem;
        color: var(--primary-color);
        margin-bottom: 0.5rem;
    }

    .dashboard-header .subtitle {
        color: var(--text-secondary);
        font-size: 1.1rem;
    }

    /* Stats */
    .stat-box {
        background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
        color: white;
        border-radius: var(--radius-large);
        padding: 1.5rem;
        text-align: center;
    }

    .stat-label {
        font-size: 0.9rem;
        opacity: 0.9;
        margin-bottom: 0.5rem;
    }

    .stat-value {
        font-size: 2rem;
        font-weight: 700;
    }

    /* Tabs */
    .tabs-container {
        display: flex;
        gap: 0;
        margin: 2rem 0;
        border-bottom: 2px solid var(--border-color);
        overflow-x: auto;
    }

    .tab-button {
        background: none;
        border: none;
        padding: 1rem 1.5rem;
        cursor: pointer;
        font-weight: 600;
        color: var(--text-secondary);
        border-bottom: 3px solid transparent;
        transition: var(--transition);
        display: flex;
        align-items: center;
        gap: 0.5rem;
        white-space: nowrap;
        font-size: 0.95rem;
    }

    .tab-button svg {
        width: 20px;
        height: 20px;
    }

    .tab-button:hover {
        color: var(--primary-color);
    }

    .tab-button.active {
        color: var(--primary-color);
        border-bottom-color: var(--primary-color);
    }

    .tab-content {
        display: none;
        animation: fadeIn 0.3s ease;
    }

    .tab-content.active {
        display: block;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .tab-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
        gap: 1rem;
    }

    .tab-header h2 {
        color: var(--primary-color);
        margin: 0;
    }

    /* Subscriptions */
    .subscriptions-list {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1.5rem;
    }

    /* Payments Table */
    .payments-table {
        overflow-x: auto;
    }

    .payments-table table {
        width: 100%;
        border-collapse: collapse;
        background: var(--bg-primary);
        border-radius: var(--radius-medium);
        overflow: hidden;
    }

    .payments-table th {
        background: var(--bg-secondary);
        padding: 1rem;
        text-align: left;
        font-weight: 600;
        color: var(--primary-color);
    }

    .payments-table td {
        padding: 1rem;
        border-bottom: 1px solid var(--border-color);
    }

    .payments-table tbody tr:hover {
        background: var(--bg-secondary);
    }

    .status-badge {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 600;
    }

    .status-badge.completed {
        background: rgba(76, 175, 80, 0.2);
        color: var(--success-color);
    }

    .status-badge.pending {
        background: rgba(255, 152, 0, 0.2);
        color: var(--warning-color);
    }

    .status-badge.failed {
        background: rgba(244, 67, 54, 0.2);
        color: var(--error-color);
    }

    /* Documents */
    .documents-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 1.5rem;
    }

    .document-card {
        background: var(--bg-primary);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-large);
        padding: 1.5rem;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        text-align: center;
        transition: var(--transition);
    }

    .document-card:hover {
        border-color: var(--primary-color);
        box-shadow: var(--shadow-medium);
    }

    .document-card svg {
        width: 48px;
        height: 48px;
        color: var(--primary-color);
        margin: 0 auto;
    }

    .document-info h3 {
        color: var(--primary-color);
        margin-bottom: 0.5rem;
    }

    /* Support */
    .contact-methods {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-bottom: 1rem;
    }

    .contact-method {
        display: flex;
        gap: 1rem;
        align-items: flex-start;
    }

    .contact-method svg {
        width: 32px;
        height: 32px;
        color: var(--primary-color);
        flex-shrink: 0;
    }

    .contact-method strong {
        color: var(--primary-color);
    }

    .resource-list {
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
    }

    .resource-list a {
        color: var(--primary-color);
        text-decoration: none;
        font-weight: 500;
    }

    .resource-list a:hover {
        text-decoration: underline;
    }

    .text-link {
        color: var(--primary-color);
        text-decoration: none;
    }

    /* Empty State */
    .empty-state {
        text-align: center;
        padding: 3rem 1rem;
        background: var(--bg-secondary);
        border-radius: var(--radius-large);
    }

    .empty-state svg {
        width: 64px;
        height: 64px;
        color: var(--text-secondary);
        margin-bottom: 1rem;
        opacity: 0.5;
    }

    .empty-state h3 {
        color: var(--primary-color);
        margin-bottom: 0.5rem;
    }

    .empty-state p {
        color: var(--text-secondary);
        margin-bottom: 1.5rem;
    }

    /* Responsive */
    @media (max-width: 768px) {
        .tab-button {
            padding: 0.75rem 1rem;
            font-size: 0.85rem;
        }

        .tab-button svg {
            width: 18px;
            height: 18px;
        }

        .grid-2,
        .grid-3 {
            grid-template-columns: 1fr;
        }

        .subscriptions-list {
            grid-template-columns: 1fr;
        }

        .documents-grid {
            grid-template-columns: 1fr;
        }

        .payments-table {
            font-size: 0.9rem;
        }

        .payments-table th,
        .payments-table td {
            padding: 0.75rem 0.5rem;
        }

        .tab-header {
            flex-direction: column;
            align-items: flex-start;
        }

        .tab-header .btn {
            width: 100%;
        }
    }
</style>

<!-- Tab Management Script -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');

        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const tabName = button.dataset.tab;

                // Remove active class from all
                tabButtons.forEach(b => b.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));

                // Add active class to clicked
                button.classList.add('active');
                document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            });
        });
    });
</script>
